Лаунчер имеет настройки
1. запускаемый файл
2. classpath
настройки применяются при запуске процесса:
java -classpath":classpath" :запускаемый файл

3. настройки ftp
4. шаблон имени файла обновления
5. шаблон имени файла дистрибутива
6. имя файла Preскрипта
7. имя файла Postскрипта
8. частота проверки обновления

Версия дистрибутива задается двумя разрядами например 12.234, 2.3 и т.д.
Шаблон имени файла дистрибутива - шаблон имени файла содержащего полную версию программы например scanstation ver [:version] соответствует scanstation ver 1.2
Шаблон именифайла обновления - шаблон имени файла содержащего изменения для перехода с версии на версию например scanstation patch [:curentVersion]-[:newVersion] соответствует scanstation patch 1.0-2.0


Обновления:

Обновляния и дистрибутивы это zip архивы имя задается в определенном формате.
Выкладываются на ftp-сервер 
дистрибутив и файлы обновления содержат файл app.version в котором указана текущая версия программы та же версия программы содержится в имени файла.

Процесс запуска лаунчера:

При запуске лаунчер проверяет tmp директорию на наличие загруженных, но не установленных обновлений если обновления есть запускается процесс "Доебем пользователя".
после выхода из процесса "Доебем пользователя" запускается процесс "Мониторинг сканстанции".
если не установленных обновлений нет запускаются процессы "Мониторинг сканстанции", "Мониторинг FTP"

Мониторинг сканстанции:

лаунчер запускает сканстанцию и следит за ее состоянием. при завершении процесса сканстанции с кодом 407 лаунчер по новой запускает сканстанцию
при завершении процесса сканстанции с кодом  400 лаунчер завершает свой процесс.
при падении процесса сканстанции раньше чем через 10 минут лаунчер выводит сообщение за Администратора и завершает работу
при падении процесса сканстанции позже чем через 10 минут с момента запуска лаунчер заного ее стартует.

Процесс доебем пользователя:

запускается при наличии в tmp директории не установленных обновлений. 
Выводим окно "Загруженны обновления для приложения СканСтанция Установить Напомнить позже.
при выборе пользователем варианта Установить запускается процесс "Установка обновлений". 
при выборе пользователем варианта Напомнить позже процесс засыпает на 15 минут после чего опять предлагает установить обновление.

Мониторинг FTP

лаунчер периодически (настраивается в конфиге по умолчанию 10 минут) подключается к ftp серверу и анализирует список файлов на нем.
для этого лаунчер получает список файлов и проверяет имена файла на соответствие шаблону имени дистрибутива.
Находит дистрибутив с максимальной версией. Если максимальная версия равна установленной то мониторинг FTP завершается.
Найдя дистрибутив с версией большей текущей лаунчер пытается найти обновление с текущей версии на версию дистрибутива.
если файл обновления найден то работаем с ним если нет то работаем с файлом дистрибутива. 
происходит загрузка файла в tmp директорию
по окончанию загрузки запускается процесс "доебем пользователя"
например:
тукущая версия 2.0
на ftp сервере лежат файлы
scanstation ver 2.0
scanstation ver 3.0
scanstation patch 2.0-3.0

шаг 1 нашли дистрибутив с максимальной версией scanstation ver 3.0
шаг 2 нашли патч с нашей версии на максимальную scanstation patch 2.0-3.0
шаг 3 загрузили патч scanstation patch 2.0-3.0

тукущая версия 2.0
на ftp сервере лежат файлы
scanstation ver 2.0
scanstation ver 3.0
scanstation ver 3.5
scanstation patch 2.0-3.0

шаг 1 нашли дистрибутив с максимальной версией scanstation ver 3.0
шаг 2 убедились что файл scanstation patch 2.0-3.5 отсутствует
шаг 3 загрузили scanstation ver 3.5

Процесс обновления:

лаунчер прибивает процесс сканстанции
лаунчер распаковывает архив с обновлением в tmp директорию
ищет файл Preскрипт
если находит копирует файл в директорию сканстанции и выполняет его из директории, ждёт его завершения
копирует файлы обновления в директорию сканстанции
ищет файл postскрипт выполняет его если есть, ждёт его завершения
запускает процесс сканстанции
запускает процесс мониторинг ftp